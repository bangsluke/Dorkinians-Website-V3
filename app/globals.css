@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
	/* Primary Colors */
	--color-primary: #1c8841; /* Dorkinians Green */
	--color-primary-dark: #1a7a3a;
	--color-primary-darker: #156b32;
	--dorkinians-green: var(--color-primary);
	--dorkinians-green-dark: var(--color-primary-dark);
	--dorkinians-green-darker: var(--color-primary-darker);
	
	/* Secondary Colors */
	--color-secondary: #f9ed32; /* Dorkinians Yellow */
	--color-secondary-dark: #e5d12e;
	--color-secondary-darker: #cfbf29;
	--dorkinians-yellow: var(--color-secondary);
	--dorkinians-yellow-dark: var(--color-secondary-dark);
	--dorkinians-yellow-darker: var(--color-secondary-darker);

	/* WCAG-compliant text colors for dark backgrounds (4.5:1 contrast ratio) */
	--dorkinians-yellow-text: #FFF176; /* ~15.68:1 on #0f0f0f */
	--dorkinians-yellow-text-hover: #FFEB3B; /* Slightly darker for hover states */
	--dorkinians-green-text: #66BB6A; /* ~7.51:1 on #0f0f0f */
	
	/* Semantic Colors */
	--color-success: #10b981; /* green-500 */
	--color-success-bg: rgba(16, 185, 129, 0.3);
	--color-error: #ef4444; /* red-500 */
	--color-error-bg: rgba(239, 68, 68, 0.2);
	--color-warning: #f59e0b; /* amber-500 */
	--color-warning-bg: rgba(245, 158, 11, 0.2);
	--color-info: #3b82f6; /* blue-500 */
	--color-info-bg: rgba(59, 130, 246, 0.2);
	
	/* Neutral Colors */
	--color-background: #0f0f0f;
	--color-surface: rgba(255, 255, 255, 0.1);
	--color-surface-elevated: rgba(255, 255, 255, 0.15);
	--color-text-primary: #f3f3f3;
	--color-text-secondary: rgba(243, 243, 243, 0.8);
	--color-text-tertiary: rgba(243, 243, 243, 0.6);
	--color-border: rgba(255, 255, 255, 0.2);
	--color-border-subtle: rgba(255, 255, 255, 0.1);
	--text-light: var(--color-text-primary);
	--text-dark: var(--color-background);
	
	/* Field Colors */
	--color-field-bg: rgba(0, 0, 0, 0.55);
	--color-field-border: rgba(255, 255, 255, 0.2);
	--color-field-focus: rgba(249, 237, 50, 0.4);
	--color-field-focus-ring: rgba(249, 237, 50, 0.1);
	--field-bg: var(--color-field-bg);
	
	/* Additional Colors */
	--color-dropdown-bg: rgb(14, 17, 15);
	--color-gradient-green-start: rgba(28, 136, 65, 0.8);
	--color-gradient-green-mid: rgba(28, 136, 65, 0.5);
	--color-gradient-green-light: rgba(28, 136, 65, 0.3);
	--color-gradient-yellow-start: rgba(249, 237, 50, 0.7);
	--color-gradient-yellow-mid: rgba(249, 237, 50, 0.4);
	--color-gradient-dark-1: rgba(15, 15, 15, 0.8);
	--color-gradient-dark-2: rgba(15, 15, 15, 0.6);
	--color-gradient-dark-3: rgba(15, 15, 15, 0.5);
	--color-gradient-dark-4: rgba(15, 15, 15, 0.4);
	--color-gradient-dark-5: rgba(10, 10, 10, 0.6);
	--color-gradient-dark-6: rgba(10, 10, 10, 0.4);
	--color-gradient-dark-7: rgba(10, 10, 10, 0.3);
	--color-gradient-dark-8: rgba(5, 5, 5, 0.4);
	--color-gradient-dark-9: rgba(5, 5, 5, 0.2);
	--color-gradient-dark-10: rgba(5, 5, 5, 0.1);
	--color-gradient-dark-11: rgba(0, 0, 0, 0.2);
	--color-gradient-base-1: #1a1a1a;
	--color-gradient-base-2: #0f0f0f;
	--color-gradient-base-3: #0a0a0a;
	
	/* Scrollbar Colors */
	--color-scrollbar-thumb: rgba(255, 255, 255, 0.15);
	--color-scrollbar-thumb-hover: rgba(255, 255, 255, 0.25);
	
	/* Skeleton Colors */
	--skeleton-base: #637469;
	--skeleton-highlight: #6B6E6C;
	
	/* Animation Tokens */
	--duration-fast: 150ms;
	--duration-normal: 200ms;
	--duration-slow: 300ms;
	--duration-slower: 500ms;
	
	/* Easing */
	--ease-in: cubic-bezier(0.4, 0, 1, 1);
	--ease-out: cubic-bezier(0, 0, 0.2, 1);
	--ease-in-out: cubic-bezier(0.4, 0, 0.2, 1);
	--ease-spring: cubic-bezier(0.68, -0.55, 0.265, 1.55);
	
	/* Delays */
	--delay-tooltip-mouse: 300ms;
	--delay-tooltip-touch: 500ms;
}

@layer base {
	html {
		font-family: "Inter", system-ui, sans-serif;
	}

	/* Desktop font size reduction (15% smaller) */
	@media (min-width: 768px) {
		html {
			font-size: 85%;
		}
	}

	body {
		@apply bg-gray-50 text-gray-900;
		background: var(--color-background);
		color: var(--color-text-primary);
	}

	/* Mobile-first gradient background using Dorkinians brand colors */
	body::before {
		content: "";
		position: fixed;
		inset: 0;
		z-index: -1;
		background:
			radial-gradient(
				600px 500px at 25% 25%,
				var(--color-gradient-green-start) 0%,
				var(--color-gradient-dark-2) 30%,
				var(--color-gradient-dark-6) 60%,
				var(--color-gradient-dark-9) 80%,
				transparent 100%
			),
			radial-gradient(
				500px 400px at 75% 75%,
				var(--color-gradient-yellow-start) 0%,
				var(--color-gradient-dark-3) 35%,
				var(--color-gradient-dark-7) 65%,
				var(--color-gradient-dark-10) 85%,
				transparent 100%
			),
			radial-gradient(
				700px 600px at 50% 50%,
				var(--color-gradient-green-light) 0%,
				var(--color-gradient-dark-4) 40%,
				var(--color-gradient-dark-7) 70%,
				var(--color-gradient-dark-9) 90%,
				transparent 100%
			),
			radial-gradient(
				800px 700px at 15% 85%,
				var(--color-gradient-yellow-mid) 0%,
				var(--color-gradient-dark-3) 30%,
				var(--color-gradient-dark-7) 60%,
				var(--color-gradient-dark-10) 85%,
				transparent 100%
			),
			radial-gradient(
				900px 800px at 85% 15%,
				var(--color-gradient-green-mid) 0%,
				var(--color-gradient-dark-2) 25%,
				var(--color-gradient-dark-6) 55%,
				var(--color-gradient-dark-9) 80%,
				transparent 100%
			),
			radial-gradient(
				1000px 900px at 50% 50%,
				var(--color-gradient-dark-1) 0%,
				var(--color-gradient-dark-5) 30%,
				var(--color-gradient-dark-8) 60%,
				var(--color-gradient-dark-11) 85%,
				transparent 100%
			),
			radial-gradient(1200px 1000px at -5% -5%, var(--color-gradient-base-1) 0%, var(--color-gradient-base-2) 60%, var(--color-gradient-base-3) 100%);
		filter: blur(15px) saturate(110%);
		transform: scale(1.02);
	}

	/* Desktop gradient background */
	@media (min-width: 768px) {
		body::before {
			background:
				radial-gradient(
					1200px 900px at 20% 30%,
					var(--color-gradient-green-start) 0%,
					var(--color-gradient-dark-2) 30%,
					var(--color-gradient-dark-6) 60%,
					var(--color-gradient-dark-9) 80%,
					transparent 100%
				),
				radial-gradient(
					1000px 800px at 80% 70%,
					var(--color-gradient-yellow-start) 0%,
					var(--color-gradient-dark-3) 35%,
					var(--color-gradient-dark-7) 65%,
					var(--color-gradient-dark-10) 85%,
					transparent 100%
				),
				radial-gradient(
					1400px 1000px at 50% 50%,
					var(--color-gradient-green-light) 0%,
					var(--color-gradient-dark-4) 40%,
					var(--color-gradient-dark-7) 70%,
					var(--color-gradient-dark-9) 90%,
					transparent 100%
				),
				radial-gradient(
					1600px 1200px at 10% 80%,
					var(--color-gradient-yellow-mid) 0%,
					var(--color-gradient-dark-3) 30%,
					var(--color-gradient-dark-7) 60%,
					var(--color-gradient-dark-10) 85%,
					transparent 100%
				),
				radial-gradient(
					1800px 1400px at 90% 20%,
					var(--color-gradient-green-mid) 0%,
					var(--color-gradient-dark-2) 25%,
					var(--color-gradient-dark-6) 55%,
					var(--color-gradient-dark-9) 80%,
					transparent 100%
				),
				radial-gradient(
					2000px 1600px at 50% 50%,
					var(--color-gradient-dark-1) 0%,
					var(--color-gradient-dark-5) 30%,
					var(--color-gradient-dark-8) 60%,
					var(--color-gradient-dark-11) 85%,
					transparent 100%
				),
				radial-gradient(2200px 1800px at -5% -5%, var(--color-gradient-base-1) 0%, var(--color-gradient-base-2) 60%, var(--color-gradient-base-3) 100%);
			filter: blur(20px) saturate(120%);
			transform: scale(1.05);
		}
	}

	/* Large desktop gradient background */
	@media (min-width: 1280px) {
		body::before {
			background:
				radial-gradient(
					1600px 1200px at 20% 30%,
					var(--color-gradient-green-start) 0%,
					var(--color-gradient-dark-2) 30%,
					var(--color-gradient-dark-6) 60%,
					var(--color-gradient-dark-9) 80%,
					transparent 100%
				),
				radial-gradient(
					1400px 1000px at 80% 70%,
					var(--color-gradient-yellow-start) 0%,
					var(--color-gradient-dark-3) 35%,
					var(--color-gradient-dark-7) 65%,
					var(--color-gradient-dark-10) 85%,
					transparent 100%
				),
				radial-gradient(
					1800px 1400px at 50% 50%,
					var(--color-gradient-green-light) 0%,
					var(--color-gradient-dark-4) 40%,
					var(--color-gradient-dark-7) 70%,
					var(--color-gradient-dark-9) 90%,
					transparent 100%
				),
				radial-gradient(
					2000px 1600px at 10% 80%,
					var(--color-gradient-yellow-mid) 0%,
					var(--color-gradient-dark-3) 30%,
					var(--color-gradient-dark-7) 60%,
					var(--color-gradient-dark-10) 85%,
					transparent 100%
				),
				radial-gradient(
					2200px 1800px at 90% 20%,
					var(--color-gradient-green-mid) 0%,
					var(--color-gradient-dark-2) 25%,
					var(--color-gradient-dark-6) 55%,
					var(--color-gradient-dark-9) 80%,
					transparent 100%
				),
				radial-gradient(
					2400px 2000px at 50% 50%,
					var(--color-gradient-dark-1) 0%,
					var(--color-gradient-dark-5) 30%,
					var(--color-gradient-dark-8) 60%,
					var(--color-gradient-dark-11) 85%,
					transparent 100%
				),
				radial-gradient(2800px 2400px at -5% -5%, var(--color-gradient-base-1) 0%, var(--color-gradient-base-2) 60%, var(--color-gradient-base-3) 100%);
			filter: blur(25px) saturate(130%);
			transform: scale(1.08);
		}
	}
}

@layer components {
	/* Frosted glass - applied to frosted container further down */
	.frosted-glass {
		background-color: var(--color-surface-elevated);
		backdrop-filter: blur(30px);
		-webkit-backdrop-filter: blur(30px);
	}
	
	/* Animation utility classes using design tokens */
	.transition-normal {
		transition-duration: var(--duration-normal);
		transition-timing-function: var(--ease-out);
	}

	.btn-secondary {
		@apply bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-lg;
		transition: all var(--duration-normal) var(--ease-out);
	}

	.card {
		@apply bg-white rounded-lg shadow-sm border border-gray-200 p-6;
	}

	.input-field {
		@apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-dorkinians-blue focus:border-transparent;
	}

	/* Dark input components - DEPRECATED: Use Input component from components/ui/Input.tsx instead */
	/* Kept for backward compatibility but should be migrated to Input component */
	.dark-input {
		background: var(--color-field-bg);
		color: var(--color-text-primary);
		@apply rounded-2xl px-4 py-3;
		transition: all var(--duration-normal) var(--ease-out);
	}

	.dark-input:focus {
		outline: none;
		border-color: var(--color-field-focus);
		box-shadow: 0 0 0 3px var(--color-field-focus-ring);
	}

	.dark-input::placeholder {
		color: rgba(255, 241, 118, 0.6); /* WCAG-compliant yellow with opacity for placeholder */
	}

	/* Override browser autofill/autocomplete styling to maintain dark theme */
	input:-webkit-autofill,
	input:-webkit-autofill:hover,
	input:-webkit-autofill:focus,
	input:-webkit-autofill:active {
		-webkit-box-shadow: 0 0 0 30px var(--color-field-bg) inset !important;
		-webkit-text-fill-color: var(--color-text-primary) !important;
		background-color: var(--color-field-bg) !important;
		caret-color: var(--color-text-primary);
		transition: background-color 5000s ease-in-out 0s, color 5000s ease-in-out 0s;
	}

	/* Ensure autofilled inputs maintain border styling */
	input:-webkit-autofill {
		border-color: var(--color-field-border) !important;
	}

	input:-webkit-autofill:focus {
		border-color: var(--color-field-focus) !important;
		box-shadow: 0 0 0 3px var(--color-field-focus-ring) !important;
		-webkit-box-shadow: 0 0 0 30px var(--color-field-bg) inset, 0 0 0 3px var(--color-field-focus-ring) !important;
	}


	.dark-dropdown {
		background: var(--color-dropdown-bg);
		color: var(--color-text-primary);
		@apply rounded-2xl;
		box-shadow:
			0 10px 25px rgba(0, 0, 0, 0.45),
			0 2px 6px rgba(0, 0, 0, 0.35);
		backdrop-filter: none;
	}

	.dark-dropdown-option {
		background: var(--color-dropdown-bg);
		color: var(--color-text-primary);
		@apply px-4 py-3;
		transition: all var(--duration-normal) var(--ease-out);
	}

	.dark-dropdown-option:hover {
		background: rgba(249, 237, 50, 0.1);
		color: var(--dorkinians-yellow-text);
	}

	.dark-dropdown-option.selected {
		background: var(--color-gradient-green-light);
		color: var(--dorkinians-yellow-text);
		border-left: 3px solid var(--color-primary);
	}

	/* Chat interface dark styling - DEPRECATED: Use Input component from components/ui/Input.tsx instead */
	/* Kept for backward compatibility but should be migrated to Input component */
	.dark-chat-input {
		background: linear-gradient(180deg, rgba(255, 255, 255, 0.22), rgba(255, 255, 255, 0.05));
		color: var(--color-text-primary);
		@apply rounded-2xl p-4;
		transition: all var(--duration-normal) var(--ease-out);
	}

	.dark-chat-input:focus {
		outline: none;
		border-color: var(--color-field-focus);
		box-shadow: 0 0 0 3px var(--color-field-focus-ring);
	}


	/* Responsive frosted glass container */
	.frosted-container {
		@apply frosted-glass rounded-2xl;
		position: fixed;
		top: 64px;          /* Account for fixed header */
		bottom: 100px;      /* Account for fixed footer */
		left: 11px;
		right: 11px;
		overflow-x: hidden;
		overflow-y: hidden;
		z-index: 40;        /* Below header/footer (z-50) but above content */
	}

	/* Desktop frosted glass container */
	@media (min-width: 768px) {
		.frosted-container {
			left: 231px;
			right: 11px;
			width: auto;
			transform: none;
			top: 11px;
			bottom: 11px;
		}
	}
}

/* Style the main content container with the frosted glass */
.main-content-container {
	padding: 64px 11px 100px 11px;
	height: 100vh;
}

/* Settings page - remove footer spacing */
.main-content-container.settings-page {
	padding: 64px 11px 11px 11px;
}

.frosted-container.settings-frosted-container {
	bottom: 11px;
}

/* Desktop main content container */
@media (min-width: 768px) {
	.main-content-container {
		padding: 11px 11px 11px 231px;
		height: 100vh;
	}

	.main-content-container.settings-page {
		padding: 11px 11px 11px 231px;
	}

	/* Masonry layout for player stats - desktop only */
	.player-stats-masonry {
		column-count: 2;
		column-gap: 1rem;
		width: 100%;
	}

	.player-stats-masonry > *:not(.single-column-section),
	.player-stats-masonry > div:not(.single-column-section) {
		break-inside: avoid !important;
		page-break-inside: avoid !important;
		-webkit-column-break-inside: avoid !important;
		display: block !important;
		width: 100% !important;
		margin-bottom: 1rem !important;
		box-sizing: border-box;
	}

	/* When single-column sections are present, use grid for better control */
	/* On desktop: 2-column grid, all sections span 1 column */
	/* On mobile: 1-column layout (handled by space-y-4 class) */
	@media (min-width: 768px) {
		.player-stats-masonry:has(.single-column-section) {
			display: grid !important;
			grid-template-columns: repeat(2, 1fr) !important;
			grid-auto-flow: row dense !important;
			gap: 1rem !important;
			column-count: unset !important;
			column-gap: unset !important;
		}

		.player-stats-masonry:has(.single-column-section) > * {
			grid-column: span 1 !important;
			margin-bottom: 0 !important;
			box-sizing: border-box !important;
		}
	}

	.player-stats-masonry .single-column-section {
		break-inside: avoid !important;
		page-break-inside: avoid !important;
		-webkit-column-break-inside: avoid !important;
	}
}


@layer utilities {
	.text-balance {
		text-wrap: balance;
	}
}

/* Global Scrollbar Styling */
::-webkit-scrollbar {
	width: 12px;
	background: transparent;
}

::-webkit-scrollbar-track {
	background: transparent;
}

::-webkit-scrollbar-thumb {
	background-color: var(--color-scrollbar-thumb);
	border-radius: 6px;
	border: 2px solid transparent;
	background-clip: content-box;
}

::-webkit-scrollbar-thumb:hover {
	background-color: var(--color-scrollbar-thumb-hover);
}

::-webkit-scrollbar-button {
	background-color: var(--color-scrollbar-thumb);
	border-radius: 3px;
}

::-webkit-scrollbar-button:hover {
	background-color: var(--color-scrollbar-thumb-hover);
}

::-webkit-scrollbar-button:single-button:vertical:decrement {
	height: 16px;
}

::-webkit-scrollbar-button:single-button:vertical:increment {
	height: 16px;
}

/* Firefox scrollbar styling */
* {
	scrollbar-width: thin;
	scrollbar-color: var(--color-scrollbar-thumb) transparent;
}

/* Make Recharts active bar background highlight more transparent */
/* Target the tooltip cursor (background highlight) behind active bars */
.recharts-tooltip-cursor {
	fill-opacity: 0.5 !important;
	opacity: 0.5 !important;
}

/* Chart container utility class for mobile scrolling */
.chart-container {
	touch-action: pan-y;
	-webkit-overflow-scrolling: touch;
}

/* Allow scrolling through Recharts SVG elements on mobile */
.recharts-wrapper,
.recharts-surface,
.recharts-wrapper svg {
	touch-action: pan-y;
	pointer-events: auto;
}

/* Team comparison checkbox with white checkmark */
.team-comparison-checkbox {
	appearance: none;
	-webkit-appearance: none;
	-moz-appearance: none;
	border: 2px solid;
	cursor: pointer;
	position: relative;
	background-color: transparent;
}

.team-comparison-checkbox:checked::after {
	content: '';
	position: absolute;
	left: 50%;
	top: 50%;
	transform: translate(-50%, -60%) rotate(45deg);
	width: 3px;
	height: 7px;
	border: solid white;
	border-width: 0 2px 2px 0;
}

/* Ensure Recharts chart elements don't block scroll events */
.recharts-cartesian-grid,
.recharts-bar,
.recharts-bar-rectangle,
.recharts-pie,
.recharts-pie-sector,
.recharts-line,
.recharts-line-dot,
.recharts-area {
	pointer-events: none;
}

/* Allow tooltip interactions but not scroll blocking */
.recharts-tooltip-wrapper {
	touch-action: pan-y;
	pointer-events: auto;
}


/* Player Detail Modal - Reduced scrollbar width (50% of default) */
.player-detail-scrollable::-webkit-scrollbar {
	width: 6px;
}

.player-detail-scrollable {
	scrollbar-width: thin;
	scrollbar-color: var(--color-scrollbar-thumb) transparent;
}

/* Hide scrollbar utility class */
.hide-scrollbar {
	scrollbar-width: none;
	-ms-overflow-style: none;
}
.hide-scrollbar::-webkit-scrollbar {
	display: none;
}